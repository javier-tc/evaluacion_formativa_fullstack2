<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Contacto - VinylStore</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="header">
    <nav class="nav">
      <div class="nav-brand">
        <h1><a class="nav-brand-link" href="index.html">VinylStore</a></h1>
      </div>
      <ul class="nav-menu">
        <li><a href="index.html" class="nav-link">Inicio</a></li>
        <li><a href="productos.html" class="nav-link">Productos</a></li>
        <li><a href="blogs.html" class="nav-link">Blogs</a></li>
        <li><a href="login.html" class="nav-link">Ingresar</a></li>
        <li><a href="registro.html" class="nav-link nav-btn">Registrarse</a></li>
        <li>
          <div class="cart-icon" onclick="cart.toggleCart()">
            ðŸ›’
            <span class="cart-count" id="cart-count"></span>
          </div>
        </li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="hero">
      <div class="hero-content">
        <h2>Contacto</h2>
        <p>Â¿Tienes alguna pregunta? Â¡EscrÃ­benos!</p>
      </div>
    </section>

    <section class="form-container">
      <div class="form-card">
        <h2>Formulario de Contacto</h2>
        <p class="form-subtitle">Completa el formulario y nos pondremos en contacto contigo</p>
        
        <form class="form" id="contact-form" novalidate>
          <div class="form-group">
            <label for="nombre">Nombre completo *</label>
            <input type="text" id="nombre" name="nombre" required maxlength="100">
            <span class="error-message" id="nombre-error"></span>
          </div>
          
          <div class="form-group">
            <label for="email">Correo ElectrÃ³nico</label>
            <input type="email" id="email" name="email" maxlength="100">
            <span class="error-message" id="email-error"></span>
          </div>
          
          <div class="form-group">
            <label for="comentario">Comentario *</label>
            <textarea id="comentario" name="comentario" rows="5" required maxlength="500" placeholder="Escribe tu mensaje aquÃ­..."></textarea>
            <span class="error-message" id="comentario-error"></span>
          </div>
          
          <button type="submit" class="submit-btn">Enviar Mensaje</button>
        </form>
        
        <div class="form-footer">
          <p>TambiÃ©n puedes contactarnos directamente:</p>
          <p>ðŸ“§ Email: info@vinylstore.cl</p>
          <p>ðŸ“ž TelÃ©fono: +56 9 1234 5678</p>
        </div>
      </div>
    </section>
  </main>

  <!--modal del carrito-->
  <div id="cart-modal" class="cart-modal">
    <div class="cart-content">
      <div class="cart-header">
        <h2>Mi Carrito</h2>
        <button class="close-cart" onclick="cart.closeCart()">&times;</button>
      </div>
      <div class="cart-body">
        <div id="cart-empty" class="cart-empty">
          <p>Tu carrito estÃ¡ vacÃ­o</p>
          <p>Â¡Agrega algunos vinilos!</p>
        </div>
        <div id="cart-items"></div>
      </div>
      <div class="cart-footer">
        <div class="cart-total">
          Total: <span id="cart-total">$0</span>
        </div>
        <button class="checkout-btn" onclick="alert('Â¡Gracias por tu compra!')" disabled>
          Proceder al Pago
        </button>
      </div>
    </div>
  </div>

  <script src="cart.js"></script>
  
  <script>
    //validaciones del formulario de contacto
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('contact-form');
        const inputs = form.querySelectorAll('input, textarea');
        
        //funciÃ³n para mostrar mensaje de error
        function showError(input, message) {
            const formGroup = input.parentElement;
            const errorElement = formGroup.querySelector('.error-message');
            
            formGroup.classList.add('error');
            formGroup.classList.remove('success');
            errorElement.textContent = message;
        }
        
        //funciÃ³n para mostrar mensaje de Ã©xito
        function showSuccess(input) {
            const formGroup = input.parentElement;
            const errorElement = formGroup.querySelector('.error-message');
            
            formGroup.classList.remove('error');
            formGroup.classList.add('success');
            errorElement.textContent = '';
        }
        
        //validaciÃ³n del nombre
        function validateNombre(nombre) {
            if (nombre.trim() === '') {
                return 'El nombre es obligatorio';
            }
            if (nombre.length > 100) {
                return 'El nombre no puede exceder 100 caracteres';
            }
            return '';
        }
        
        //validaciÃ³n del email
        function validateEmail(email) {
            if (email.trim() === '') {
                return ''; //email es opcional
            }
            if (email.length > 100) {
                return 'El email no puede exceder 100 caracteres';
            }
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                return 'Ingresa un email vÃ¡lido';
            }
            //validar dominios permitidos
            const allowedDomains = ['@duoc.cl', '@profesor.duoc.cl', '@gmail.com'];
            const hasValidDomain = allowedDomains.some(domain => email.endsWith(domain));
            if (!hasValidDomain) {
                return 'Solo se permiten correos de @duoc.cl, @profesor.duoc.cl y @gmail.com';
            }
            return '';
        }
        
        //validaciÃ³n del comentario
        function validateComentario(comentario) {
            if (comentario.trim() === '') {
                return 'El comentario es obligatorio';
            }
            if (comentario.length > 500) {
                return 'El comentario no puede exceder 500 caracteres';
            }
            return '';
        }
        
        //validaciÃ³n en tiempo real para cada campo
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                validateField(this);
            });
            
            input.addEventListener('input', function() {
                if (this.parentElement.classList.contains('error')) {
                    validateField(this);
                }
            });
        });
        
        //funciÃ³n para validar un campo especÃ­fico
        function validateField(input) {
            const value = input.value;
            const name = input.name;
            let errorMessage = '';
            
            switch (name) {
                case 'nombre':
                    errorMessage = validateNombre(value);
                    break;
                case 'email':
                    errorMessage = validateEmail(value);
                    break;
                case 'comentario':
                    errorMessage = validateComentario(value);
                    break;
            }
            
            if (errorMessage) {
                showError(input, errorMessage);
            } else {
                showSuccess(input);
            }
        }
        
        //manejo del envÃ­o del formulario
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            
            //validar campos obligatorios
            const nombre = document.getElementById('nombre');
            const email = document.getElementById('email');
            const comentario = document.getElementById('comentario');
            
            validateField(nombre);
            validateField(email);
            validateField(comentario);
            
            if (nombre.parentElement.classList.contains('error') || 
                email.parentElement.classList.contains('error') ||
                comentario.parentElement.classList.contains('error')) {
                isValid = false;
            }
            
            if (isValid) {
                const nombreValue = nombre.value;
                const emailValue = email.value;
                const comentarioValue = comentario.value;
                
                alert(`Â¡Gracias ${nombreValue}! Tu comentario ha sido enviado. Te contactaremos pronto.`);
                form.reset();
                inputs.forEach(input => {
                    input.parentElement.classList.remove('success', 'error');
                });
            } else {
                alert('Por favor, corrige los errores en el formulario.');
            }
        });
    });
  </script>

  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-col">
        <h4 class="footer-title">Sobre VynilStore</h4>
        <ul class="footer-links">
          <li><a href="nosotros.html">Nosotros</a></li>
          <li><a href="contacto.html">Contacto</a></li>
        </ul>
      </div>
      <p class="footer-copy">&copy; 2024 VinylStore. Todos los derechos reservados.</p>
    </div>
  </footer>
</body>
</html>
